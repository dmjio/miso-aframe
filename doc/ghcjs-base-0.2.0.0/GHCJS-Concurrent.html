<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>GHCJS.Concurrent</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_GHCJS-Concurrent.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/GHCJS-Concurrent.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">ghcjs-base-0.2.0.0: base library for GHCJS</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">GHCJS.Concurrent</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>GHCJS has two types of threads. Regular, asynchronous threads are
     started with `h$run`, are managed by the scheduler and run in the
     background. `h$run` returns immediately.</p><p>Synchronous threads are started with `h$runSync`, which returns
     when the thread has run to completion. When a synchronous thread
     does an operation that would block, like accessing an MVar or
     an asynchronous FFI call, it cannot continue synchronously.</p><p>There are two ways this can be resolved, depending on the
     second argument of the `h$runSync` call:</p><ul><li>The action is aborted and the thread receives a <code><a href="GHCJS-Concurrent.html#t:WouldBlockException">WouldBlockException</a></code></li><li>The thread continues asynchronously, `h$runSync` returns</li></ul><p>Note: when a synchronous thread encounters a black hole from
     another thread, it tries to steal the work from that thread
     to avoid blocking. In some cases that might not be possible,
     for example when the data accessed is produced by a lazy IO
     operation. This is resolved the same way as blocking on an IO
     action would be.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:isThreadSynchronous">isThreadSynchronous</a> :: <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Control-Concurrent.html#t:ThreadId">ThreadId</a> -&gt; <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:isThreadContinueAsync">isThreadContinueAsync</a> :: <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Control-Concurrent.html#t:ThreadId">ThreadId</a> -&gt; <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:OnBlocked">OnBlocked</a><ul class="subs"><li>= <a href="#v:ContinueAsync">ContinueAsync</a></li><li>| <a href="#v:ThrowWouldBlock">ThrowWouldBlock</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:WouldBlockException">WouldBlockException</a> :: * = <a href="#v:WouldBlockException">WouldBlockException</a></li><li class="src short"><a href="#v:withoutPreemption">withoutPreemption</a> :: <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> a -&gt; <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:synchronously">synchronously</a> :: <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> a -&gt; <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> a</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:isThreadSynchronous" class="def">isThreadSynchronous</a> :: <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Control-Concurrent.html#t:ThreadId">ThreadId</a> -&gt; <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Data-Bool.html#t:Bool">Bool</a> <a href="src/GHCJS-Concurrent.html#isThreadSynchronous" class="link">Source</a></p><div class="doc"><p>Returns whether the <code><a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Control-Concurrent.html#t:ThreadId">ThreadId</a></code> is a synchronous thread</p></div></div><div class="top"><p class="src"><a name="v:isThreadContinueAsync" class="def">isThreadContinueAsync</a> :: <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Control-Concurrent.html#t:ThreadId">ThreadId</a> -&gt; <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Data-Bool.html#t:Bool">Bool</a> <a href="src/GHCJS-Concurrent.html#isThreadContinueAsync" class="link">Source</a></p><div class="doc"><p>Returns whether the <code><a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Control-Concurrent.html#t:ThreadId">ThreadId</a></code> will continue running async. Always
     returns <code><a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Data-Bool.html#v:True">True</a></code> when the thread is not synchronous.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:OnBlocked" class="def">OnBlocked</a> <a href="src/GHCJS-Concurrent.html#OnBlocked" class="link">Source</a></p><div class="doc"><p>The runtime tries to run synchronous threads to completion. Sometimes it's
     not possible to continue running a thread, for example when the thread
     tries to take an empty <code><a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Control-Concurrent-MVar.html#t:MVar">MVar</a></code>. The runtime can then either throw a
     <code><a href="GHCJS-Concurrent.html#t:WouldBlockException">WouldBlockException</a></code>, aborting the blocking action, or continue the
     thread asynchronously.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ContinueAsync" class="def">ContinueAsync</a></td><td class="doc"><p>continue the thread asynchronously if blocked</p></td></tr><tr><td class="src"><a name="v:ThrowWouldBlock" class="def">ThrowWouldBlock</a></td><td class="doc"><p>throw <code><a href="GHCJS-Concurrent.html#t:WouldBlockException">WouldBlockException</a></code> if blocked</p></td></tr></table></div><div class="subs instances"><p id="control.i:OnBlocked" class="caption collapser" onclick="toggleSection('i:OnBlocked')">Instances</p><div id="section.i:OnBlocked" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Prelude.html#t:Enum">Enum</a> <a href="GHCJS-Concurrent.html#t:OnBlocked">OnBlocked</a></span> <a href="src/GHCJS-Concurrent.html#line-61" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Data-Eq.html#t:Eq">Eq</a> <a href="GHCJS-Concurrent.html#t:OnBlocked">OnBlocked</a></span> <a href="src/GHCJS-Concurrent.html#line-61" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Data-Data.html#t:Data">Data</a> <a href="GHCJS-Concurrent.html#t:OnBlocked">OnBlocked</a></span> <a href="src/GHCJS-Concurrent.html#line-61" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Data-Ord.html#t:Ord">Ord</a> <a href="GHCJS-Concurrent.html#t:OnBlocked">OnBlocked</a></span> <a href="src/GHCJS-Concurrent.html#line-61" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Text-Show.html#t:Show">Show</a> <a href="GHCJS-Concurrent.html#t:OnBlocked">OnBlocked</a></span> <a href="src/GHCJS-Concurrent.html#line-61" class="link">Source</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:WouldBlockException" class="def">WouldBlockException</a> :: *</p><div class="doc"><p>If a synchronous thread tries to do something that can only
     be done asynchronously, and the thread is set up to not
     continue asynchronously, it receives this exception.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:WouldBlockException" class="def">WouldBlockException</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:WouldBlockException" class="caption collapser" onclick="toggleSection('i:WouldBlockException')">Instances</p><div id="section.i:WouldBlockException" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Text-Show.html#t:Show">Show</a> <a href="GHCJS-Concurrent.html#t:WouldBlockException">WouldBlockException</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/Control-Exception-Base.html#t:Exception">Exception</a> <a href="GHCJS-Concurrent.html#t:WouldBlockException">WouldBlockException</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:withoutPreemption" class="def">withoutPreemption</a> :: <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> a -&gt; <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> a <a href="src/GHCJS-Concurrent.html#withoutPreemption" class="link">Source</a></p><div class="doc"><p>Run the action without the scheduler preempting the thread. When a blocking
     action is encountered, the thread is still suspended and will continue
     without preemption when it's woken up again.</p><p>When the thread encounters a black hole from another thread, the scheduler
     will attempt to clear it by temporarily switching to that thread.</p></div></div><div class="top"><p class="src"><a name="v:synchronously" class="def">synchronously</a> :: <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> a -&gt; <a href="file:///Users/fizruk/.ghcjs/x86_64-darwin-0.2.0.9006020-7.10.3/ghcjs/doc/lib/base-4.8.2.0/html/System-IO.html#t:IO">IO</a> a <a href="src/GHCJS-Concurrent.html#synchronously" class="link">Source</a></p><div class="doc"><p>Run the action synchronously, which means that the thread will not
     be preempted by the scheduler. If the thread encounters a blocking
     operation, the runtime throws a WouldBlock exception.</p><p>When the thread encounters a black hole from another thread, the scheduler
     will attempt to clear it by temporarily switching to that thread.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>